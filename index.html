<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŒåœºå‹åŠ›æºæ·±åº¦æµ‹è¯„</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            /* æ ¸å¿ƒé…è‰²ï¼šç²‰ç´«æ¸å˜ */
            --gradient-main: linear-gradient(135deg, #FF8CC6 0%, #9F6AD4 100%);
            --primary-purple: #9F6AD4;
            --primary-pink: #FF8CC6;
            --text-dark: #333333;
            --text-gray: #666666;
            --bg-color: #F8F5FA;
            --card-shadow: 0 8px 24px rgba(159, 106, 212, 0.08);
            --danger-color: #FF4D4F;
            --tag-bg-purple: #8E44AD;
        }

        * { box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased; /* è®©å­—ä½“æ›´æ¸…æ™° */
        }

        /* ä¸»å®¹å™¨ */
        .container {
            width: 100%;
            max-width: 480px;
            background: #FFFFFF;
            border-radius: 24px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
            position: relative;
            padding: 30px 20px;
            display: flex;
            flex-direction: column;
            min-height: 800px;
        }

        /* æˆªå›¾ä¸“ç”¨æ¨¡å¼ï¼šå½“æ·»åŠ äº† capturing ç±»æ—¶ï¼Œå»é™¤åœ†è§’å’Œé˜´å½±ï¼Œä¿è¯æ¸…æ™°åº¦ */
        .container.capturing {
            border-radius: 0;
            box-shadow: none;
            padding: 40px 30px; /* å¢åŠ æˆªå›¾æ—¶çš„å†…è¾¹è·ï¼Œæ›´ç¾è§‚ */
            background: #FFFFFF !important; /* å¼ºåˆ¶çº¯ç™½èƒŒæ™¯ */
        }
        
        /* æˆªå›¾æ—¶å¼ºåˆ¶æ–‡å­—é¢œè‰²ï¼Œé˜²æ­¢å˜æ·¡ */
        .container.capturing * {
            color: #333333 !important;
            text-shadow: none !important;
        }
        .container.capturing .tag-pill, 
        .container.capturing .btn-gradient,
        .container.capturing .dim-score.high,
        .container.capturing .high-pressure-tag,
        .container.capturing .kit-tag {
            /* ä¿æŒ colored å…ƒç´ çš„é¢œè‰²ï¼Œä¸å¼ºåˆ¶å˜é»‘ */
            color: white !important; 
        }
        .container.capturing .dim-score.high { color: #FF4D4F !important; }
        .container.capturing .high-pressure-tag { color: #FF4D4F !important; }
        .container.capturing .stat-num { color: #E85D96 !important; }
        .container.capturing .main-title { 
            background: none; 
            -webkit-text-fill-color: #9F6AD4; /* æˆªå›¾æ—¶æ¸å˜å­—å¯èƒ½å‡ºé—®é¢˜ï¼Œæ”¹ç”¨çº¯ç´« */
            color: #9F6AD4 !important;
        }


        /* å±å¹•åˆ‡æ¢ */
        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            animation: fadeIn 0.4s ease;
        }
        .screen.active { display: flex; }

        /* æŒ‰é’® */
        .btn-gradient {
            background: var(--gradient-main);
            color: white;
            border: none;
            padding: 15px 0;
            width: 100%;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 6px 16px rgba(255, 140, 198, 0.3);
            text-align: center;
            margin-top: 10px;
        }
        
        .btn-outline {
            background: #fff;
            color: var(--text-gray);
            border: 1px solid #ddd;
            padding: 15px 0;
            width: 100%;
            border-radius: 50px;
            font-size: 16px;
            cursor: pointer;
            text-align: center;
            margin-top: 10px;
        }

        /* é¦–é¡µå…ƒç´  */
        .home-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #FDF2F8, #F3E5F5);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .main-title {
            font-size: 28px;
            font-weight: 800;
            background: var(--gradient-main);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
            text-align: center;
        }

        .tags-row { display: flex; gap: 15px; margin-bottom: 30px; font-size: 13px; color: var(--text-gray); }
        .tag-pill { background: #F5F5F5; padding: 5px 15px; border-radius: 20px; color: #666; }
        .tag-pill.highlight { color: var(--primary-purple); background: #F3E5F5; font-weight: bold; }

        .desc-text {
            text-align: center; font-size: 15px; color: var(--text-gray); line-height: 1.6; margin-bottom: 30px; padding: 0 10px;
        }

        .stats-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; width: 100%; margin-bottom: 40px; }
        .stat-card { background: #FAFAFA; border: 1px solid #F0F0F0; border-radius: 16px; padding: 16px 5px; text-align: center; }
        .stat-num { font-size: 22px; font-weight: 700; color: #E85D96; margin-bottom: 5px; }
        .stat-label { font-size: 12px; color: #999; }

        /* ç­”é¢˜é¡µå…ƒç´  */
        .progress-bar-bg { width: 100%; height: 8px; background: #F0F0F0; border-radius: 4px; margin-bottom: 25px; }
        .progress-fill { height: 100%; background: var(--gradient-main); width: 0%; border-radius: 4px; transition: width 0.3s; }
        .q-text { font-size: 19px; font-weight: 600; margin-bottom: 40px; line-height: 1.5; min-height: 60px; color: #333; }
        .option-item {
            padding: 16px; margin-bottom: 12px; border: 1px solid #EEE; border-radius: 12px; font-size: 16px; cursor: pointer; background: #fff; color: #555;
        }
        .option-item:hover { border-color: var(--primary-purple); background: #FDF9FF; color: var(--primary-purple); }

        /* ç»“æœé¡µå…ƒç´  */
        .result-top-card {
            background: #FBF9FC; border-radius: 16px; padding: 25px 20px; width: 100%; margin-bottom: 25px; text-align: center; border: 1px solid #F3E5F5;
        }
        .status-title { font-size: 20px; font-weight: 700; color: #333; margin-bottom: 8px; display: flex; align-items: center; justify-content: center; gap: 8px; }
        .status-desc { font-size: 14px; color: #666; margin-bottom: 20px; padding: 0 10px; line-height: 1.5; }
        .chart-wrapper { position: relative; height: 260px; width: 100%; margin: 0 auto; }

        /* é”¦å›Š */
        .kit-section {
            width: 100%; background: #FFF0F6; border-radius: 12px; padding: 20px; margin-bottom: 30px; border: 1px solid #FFE4EF;
        }
        .kit-header { font-size: 16px; font-weight: 700; margin-bottom: 15px; color: #333; display: flex; align-items: center; gap: 8px; }
        .kit-item { margin-bottom: 15px; display: flex; align-items: flex-start; gap: 10px; font-size: 14px; line-height: 1.6; color: #444; }
        .kit-tag { background: var(--tag-bg-purple); color: white; padding: 3px 8px; border-radius: 4px; font-size: 12px; white-space: nowrap; margin-top: 2px; }

        /* ç»´åº¦åˆ—è¡¨ */
        .dim-section-title {
            width: 100%; font-size: 17px; font-weight: 700; margin-bottom: 15px; border-left: 5px solid #E85D96; padding-left: 12px; color: #333;
        }
        .dim-card {
            width: 100%; background: #fff; border: 1px solid #eee; border-radius: 10px; padding: 18px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center;
        }
        .dim-info { flex: 1; padding-right: 15px; }
        .dim-name { font-size: 16px; font-weight: 700; color: #333; margin-bottom: 6px; display: flex; align-items: center; gap: 8px; }
        .dim-desc { font-size: 13px; color: #888; line-height: 1.4; }
        .dim-score { font-size: 20px; font-weight: 700; color: #666; }
        
        .high-pressure-tag { background: #FFF1F0; color: var(--danger-color); border: 1px solid #FFCCC7; font-size: 11px; padding: 2px 6px; border-radius: 4px; font-weight: normal; }
        .dim-score.high { color: var(--danger-color); }

        /* åº•éƒ¨æ“ä½œåŒº (æˆªå›¾æ—¶éšè—) */
        .bottom-actions { margin-top: 30px; width: 100%; display: flex; flex-direction: column; gap: 15px; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container" id="capture-target">
    
    <div id="welcome-screen" class="screen active">
        <div class="home-icon">
            <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="#9F6AD4" stroke-width="2.5"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></svg>
        </div>
        
        <h1 class="main-title">èŒåœºå‹åŠ›æºæµ‹è¯„</h1>
        
        <div class="tags-row">
            <span class="tag-pill highlight">6å¤§ç»´åº¦</span>
            <span class="tag-pill">å»ºè®®ç”¨æ—¶ 10 åˆ†é’Ÿ</span>
        </div>

        <p class="desc-text">æœ¬æµ‹è¯„åŸºäºå¿ƒç†å­¦å‹åŠ›æ¨¡å‹ï¼Œä¸ºæ‚¨ç²¾å‡†å®šä½å‹åŠ›æ ¸å¿ƒï¼Œç”Ÿæˆä¸“å±çš„â€œèŒåœºç”Ÿå­˜ç”»åƒâ€ã€‚</p>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-num">50</div>
                <div class="stat-label">ç²¾é€‰é¢˜ç›®</div>
            </div>
            <div class="stat-card">
                <div class="stat-num">6</div>
                <div class="stat-label">åˆ†æç»´åº¦</div>
            </div>
            <div class="stat-card">
                <div class="stat-num">100%</div>
                <div class="stat-label">å®šåˆ¶å»ºè®®</div>
            </div>
        </div>

        <button class="btn-gradient" onclick="startQuiz()">å¼€å§‹æµ‹è¯„</button>

        <div style="margin-top: 40px; background: #F9F9F9; padding: 20px; border-radius: 12px; width:100%;">
            <div style="font-weight: bold; color: #333; margin-bottom: 10px; font-size: 14px;">ğŸ“„ æµ‹è¯„è¯´æ˜</div>
            <div style="font-size: 12px; color: #888; line-height: 1.8;">
                â— æœ¬æµ‹è¯„åŒ…å«50é“å…³äºå·¥ä½œçŠ¶æ€ä¸å¿ƒç†æ„Ÿå—çš„é¢˜ç›®ã€‚<br>
                â— è¯·å‡­ç¬¬ä¸€ç›´è§‰é€‰æ‹©æœ€ç¬¦åˆæ‚¨ **æœ€è¿‘ä¸€ä¸ªæœˆ** çœŸå®æƒ…å†µçš„é€‰é¡¹ã€‚<br>
                â— ç»“æœä»…ç”¨äºä¸ªäººå¤ç›˜å‚è€ƒï¼Œä¸¥æ ¼ä¿æŠ¤éšç§ã€‚
            </div>
        </div>
    </div>

    <div id="quiz-screen" class="screen">
        <div class="progress-bar-bg"><div id="progress-bar" class="progress-fill"></div></div>
        <div style="font-size: 13px; color: #999; margin-bottom: 10px; width:100%;">è¿›åº¦ <span id="current-num">1</span> / 50</div>
        
        <div style="flex: 1; width: 100%; display: flex; flex-direction: column;">
            <div id="question-text" class="q-text">é¢˜ç›®åŠ è½½ä¸­...</div>
            <div class="option-item" onclick="selectOption(1)">1. éå¸¸ä¸åŒæ„</div>
            <div class="option-item" onclick="selectOption(2)">2. ä¸å¤ªåŒæ„</div>
            <div class="option-item" onclick="selectOption(3)">3. ä¸ç¡®å®š</div>
            <div class="option-item" onclick="selectOption(4)">4. æ¯”è¾ƒåŒæ„</div>
            <div class="option-item" onclick="selectOption(5)">5. éå¸¸åŒæ„</div>
        </div>
    </div>

    <div id="result-screen" class="screen">
        
        <div class="result-top-card">
            <div class="status-title">
                <span id="persona-icon"></span> 
                <span id="persona-text"></span>
            </div>
            <div class="status-desc" id="persona-desc"></div>
            
            <div class="chart-wrapper">
                <canvas id="radarChart"></canvas>
            </div>
        </div>

        <div class="kit-section" id="advice-section" style="display:none;">
            <div class="kit-header">ğŸ æ‚¨çš„èŒåœºç”Ÿå­˜é”¦å›Š (å®šåˆ¶ç‰ˆ)</div>
            <div id="advice-list">
                </div>
        </div>

        <div class="dim-section-title">å…­å¤§èŒåœºç»´åº¦æ·±åº¦è§£æ</div>
        <div id="dim-list-container" style="width:100%;">
            </div>

        <div class="bottom-actions" data-html2canvas-ignore="true">
            <button class="btn-gradient" onclick="saveAsImage()">ğŸ“¸ ä¿å­˜é«˜æ¸…é•¿å›¾ (æ¨è)</button>
            <button class="btn-outline" onclick="location.reload()">ğŸ”„ é‡æ–°æµ‹è¯•</button>
        </div>

    </div>
</div>

<script>
    // --- é¢˜åº“ ---
    const questions = [
        // 1-8 å·¥ä½œè´Ÿè·
        {t: "æˆ‘çš„å·¥ä½œé‡ç»å¸¸è¶…å‡ºæˆ‘èƒ½è´Ÿè·çš„èŒƒå›´ã€‚", d: 1}, {t: "ä¸ºäº†æŒ‰æ—¶å®Œæˆä»»åŠ¡ï¼Œæˆ‘ç»å¸¸éœ€è¦åŠ ç­æˆ–æŠŠå·¥ä½œå¸¦å›å®¶ã€‚", d: 1},
        {t: "å·¥ä½œä¸­ç»å¸¸å‡ºç°çªå‘çŠ¶å†µï¼Œæ‰“ä¹±åŸæœ¬çš„è®¡åˆ’ã€‚", d: 1}, {t: "æ¯å¤©çš„å·¥ä½œèŠ‚å¥å¤ªå¿«ï¼Œè®©æˆ‘å‡ ä¹æ²¡æœ‰å–˜æ¯çš„æ—¶é—´ã€‚", d: 1},
        {t: "æˆ‘éœ€è¦åœ¨æçŸ­çš„æ—¶é—´å†…å¤„ç†å¤§é‡çš„ä¿¡æ¯æˆ–æ•°æ®ã€‚", d: 1}, {t: "ç”±äºäººæ‰‹ä¸è¶³ï¼Œæˆ‘ç»å¸¸éœ€è¦æ‰¿æ‹…ä¸å±äºæˆ‘èŒè´£èŒƒå›´çš„å·¥ä½œã€‚", d: 1},
        {t: "åœ¨è¿™ä¸ªå²—ä½ä¸Šï¼Œæˆ‘æ—¶åˆ»æ„Ÿåˆ°æ—¶é—´ä¸å¤Ÿç”¨ã€‚", d: 1}, {t: "å·¥ä½œå¯¹æˆ‘çš„è„‘åŠ›æˆ–ä½“åŠ›æ¶ˆè€—æå¤§ï¼Œè®©æˆ‘ç²¾ç–²åŠ›ç«­ã€‚", d: 1},
        // 9-16 è§’è‰²è‡ªä¸»
        {t: "æˆ‘å¯¹è‡ªå·±çš„å²—ä½èŒè´£å’Œè€ƒæ ¸æ ‡å‡†ä¸å¤Ÿæ¸…æ™°ã€‚", d: 2}, {t: "æˆ‘ç»å¸¸æ¥åˆ°æ¥è‡ªä¸åŒé¢†å¯¼çš„ã€äº’ç›¸å†²çªçš„å·¥ä½œæŒ‡ä»¤ã€‚", d: 2},
        {t: "æˆ‘æ„Ÿè§‰è‡ªå·±åœ¨å·¥ä½œä¸­æ²¡æœ‰ä»€ä¹ˆå†³ç­–æƒï¼Œåªèƒ½è¢«åŠ¨æ‰§è¡Œã€‚", d: 2}, {t: "ä¸Šçº§å¯¹æˆ‘ç®¡å¾—å¤ªç»†ï¼ˆå¾®è§‚ç®¡ç†ï¼‰ï¼Œè®©æˆ‘è§‰å¾—ä¸å—ä¿¡ä»»ã€‚", d: 2},
        {t: "æˆ‘ä¸æ¸…æ¥šé¢†å¯¼å¯¹æˆ‘å·¥ä½œçš„æœŸæœ›åˆ°åº•æ˜¯ä»€ä¹ˆã€‚", d: 2}, {t: "åœ¨å¤„ç†å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜æ—¶ï¼Œæˆ‘ç¼ºä¹å¿…è¦çš„èµ„æºæˆ–æƒé™ã€‚", d: 2},
        {t: "æˆ‘æ„Ÿè§‰è‡ªå·±åƒä¸€é¢—â€œèºä¸é’‰â€ï¼Œå·¥ä½œå†…å®¹å•è°ƒä¸”é‡å¤ã€‚", d: 2}, {t: "å…¬å¸çš„æ”¿ç­–æˆ–æµç¨‹ç»å¸¸å˜åŠ¨ï¼Œè®©æˆ‘æ— æ‰€é€‚ä»ã€‚", d: 2},
        // 17-24 äººé™…æ²Ÿé€š
        {t: "æˆ‘æ„Ÿåˆ°å¾ˆéš¾è·å¾—ä¸Šçº§çš„æ”¯æŒå’Œç†è§£ã€‚", d: 3}, {t: "åŒäº‹ä¹‹é—´ç¼ºä¹å¿…è¦çš„åä½œï¼Œç»å¸¸å‡ºç°æ¨è¯¿æ‰¯çš®ã€‚", d: 3},
        {t: "æˆ‘è§‰å¾—åœ¨å…¬å¸é‡Œå³ä½¿åŠªåŠ›å·¥ä½œï¼Œä¹Ÿä¸ä¼šè¢«çœ‹åˆ°æˆ–è®¤å¯ã€‚", d: 3}, {t: "åŠå…¬å®¤çš„æ°›å›´æ¯”è¾ƒå‹æŠ‘ï¼Œå¤§å®¶å¾ˆå°‘çœŸè¯šäº¤æµã€‚", d: 3},
        {t: "æˆ‘éœ€è¦èŠ±è´¹å¤§é‡ç²¾åŠ›å»å¤„ç†å¤æ‚çš„äººé™…å…³ç³»ã€‚", d: 3}, {t: "å½“æˆ‘é‡åˆ°å·¥ä½œå›°éš¾æ—¶ï¼Œå¾ˆéš¾æ‰¾åˆ°äººæ±‚åŠ©ã€‚", d: 3},
        {t: "æˆ‘æ„Ÿè§‰è‡ªå·±è¢«å›¢é˜Ÿå­¤ç«‹ï¼Œæˆ–è€…å¾ˆéš¾èå…¥é›†ä½“ã€‚", d: 3}, {t: "ä¸æŸäº›ç‰¹å®šåŒäº‹æˆ–å®¢æˆ·çš„æ²Ÿé€šè®©æˆ‘æ„Ÿåˆ°éå¸¸å¿ƒç´¯ã€‚", d: 3},
        // 25-32 èŒä¸šå‘å±•
        {t: "æˆ‘çœ‹ä¸åˆ°è‡ªå·±åœ¨ç›®å‰å…¬å¸çš„æ™‹å‡ç©ºé—´æˆ–å‘å±•è·¯å¾„ã€‚", d: 4}, {t: "æˆ‘ç»å¸¸æ‹…å¿ƒè‡ªå·±ä¼šå¤±ä¸šï¼Œæˆ–è€…è¢«è¾¹ç¼˜åŒ–ã€‚", d: 4},
        {t: "ç›®å‰çš„å·¥ä½œæ— æ³•è®©æˆ‘å­¦åˆ°æ–°æŠ€èƒ½ï¼Œæ„Ÿè§‰è‡ªå·±åœ¨åŸåœ°è¸æ­¥ã€‚", d: 4}, {t: "å³ä½¿æˆ‘è¡¨ç°å‡ºè‰²ï¼Œè–ªèµ„å¾…é‡ä¹Ÿæ²¡æœ‰ç›¸åº”çš„æå‡ã€‚", d: 4},
        {t: "æˆ‘è§‰å¾—ç›®å‰çš„è¡Œä¸šæˆ–å…¬å¸å‰æ™¯å ªå¿§ã€‚", d: 4}, {t: "æˆ‘å¯¹è‡ªå·±çš„èŒä¸šæœªæ¥æ„Ÿåˆ°è¿·èŒ«ï¼Œä¸çŸ¥é“ä¸‹ä¸€æ­¥è¯¥æ€ä¹ˆèµ°ã€‚", d: 4},
        {t: "å…¬å¸å†…éƒ¨çš„ç«äº‰éå¸¸æ¿€çƒˆï¼Œè®©æˆ‘æ—¶åˆ»å¤„äºç´§ç»·çŠ¶æ€ã€‚", d: 4}, {t: "æˆ‘è§‰å¾—è‡ªå·±çš„æ‰èƒ½åœ¨ç›®å‰çš„å·¥ä½œä¸­è¢«æµªè´¹äº†ã€‚", d: 4},
        // 33-40 ç”Ÿæ´»å¹³è¡¡
        {t: "ä¸‹ç­åæˆ–å‘¨æœ«ï¼Œæˆ‘ä»ç„¶éœ€è¦éšæ—¶å›å¤å·¥ä½œæ¶ˆæ¯ã€‚", d: 5}, {t: "æƒ³åˆ°ç¬¬äºŒå¤©è¦ä¸Šç­ï¼Œæˆ‘ä¼šåœ¨å‰ä¸€å¤©æ™šä¸Šæ„Ÿåˆ°ç„¦è™‘ã€‚", d: 5},
        {t: "å·¥ä½œè€—å°½äº†æˆ‘çš„ç²¾åŠ›ï¼Œè®©æˆ‘æ— æš‡é¡¾åŠå®¶åº­æˆ–æœ‹å‹ã€‚", d: 5}, {t: "æˆ‘å¾ˆéš¾åœ¨ä¼‘å‡æ—¶å®Œå…¨æ”¾æ¾ï¼Œè„‘å­é‡Œè¿˜åœ¨æƒ³å·¥ä½œçš„äº‹ã€‚", d: 5},
        {t: "å› ä¸ºå·¥ä½œåŸå› ï¼Œæˆ‘ä¸å¾—ä¸ç‰ºç‰²è‡ªå·±çš„å…´è¶£çˆ±å¥½ã€‚", d: 5}, {t: "æˆ‘çš„å®¶äººæˆ–æœ‹å‹æŠ±æ€¨æˆ‘åœ¨å·¥ä½œä¸ŠèŠ±çš„æ—¶é—´å¤ªå¤šã€‚", d: 5},
        {t: "æˆ‘æ„Ÿè§‰ç”Ÿæ´»è¢«å·¥ä½œå¡«æ»¡ï¼Œå¤±å»äº†å±äºè‡ªå·±çš„ç©ºé—´ã€‚", d: 5}, {t: "å³ä½¿èº«ä½“ä¸èˆ’æœï¼Œæˆ‘ä¹Ÿä¸æ•¢è½»æ˜“è¯·å‡ã€‚", d: 5},
        // 41-50 èº«å¿ƒåé¦ˆ
        {t: "æœ€è¿‘æˆ‘ç»å¸¸æ„Ÿåˆ°è«åçš„çƒ¦èºæˆ–æ˜“æ€’ã€‚", d: 6}, {t: "æ—©ä¸Šé†’æ¥æ—¶ï¼Œæˆ‘æ„Ÿåˆ°ç–²æƒ«ï¼Œä¸æƒ³å»å…¬å¸ã€‚", d: 6},
        {t: "æˆ‘ç»å¸¸æ„Ÿåˆ°å¤´ç—›ã€èƒƒç—›æˆ–é¢ˆæ¤ä¸èˆ’æœã€‚", d: 6}, {t: "æˆ‘æœ€è¿‘çš„ç¡çœ è´¨é‡å˜å·®ï¼Œå…¥ç¡å›°éš¾æˆ–å¤šæ¢¦æ˜“é†’ã€‚", d: 6},
        {t: "æˆ‘å¯¹å·¥ä½œå¤±å»äº†çƒ­æƒ…ï¼Œåªæ˜¯åœ¨æœºæ¢°åœ°åº”ä»˜ã€‚", d: 6}, {t: "é¢å¯¹æ–°çš„å·¥ä½œä»»åŠ¡ï¼Œæˆ‘ç¬¬ä¸€ååº”å¾€å¾€æ˜¯æŠ—æ‹’æˆ–å®³æ€•ã€‚", d: 6},
        {t: "æˆ‘æ„Ÿè§‰è‡ªå·±çš„è®°å¿†åŠ›åœ¨ä¸‹é™ï¼Œç»å¸¸ä¸¢ä¸‰è½å››ã€‚", d: 6}, {t: "æˆ‘å˜å¾—æ¯”ä»¥å‰æ›´æ•æ„Ÿï¼Œå®¹æ˜“å› ä¸ºå°äº‹æ„Ÿåˆ°å§”å±ˆã€‚", d: 6},
        {t: "æˆ‘ç»å¸¸æ„Ÿåˆ°å­¤ç‹¬ï¼Œè§‰å¾—æ²¡æœ‰äººèƒ½ç†è§£æˆ‘çš„å‹åŠ›ã€‚", d: 6}, {t: "æˆ‘è§‰å¾—è¿™ç§é«˜å‹çŠ¶æ€å¦‚æœæŒç»­ä¸‹å»ï¼Œæˆ‘ä¼šå´©æºƒã€‚", d: 6}
    ];

    // ç»´åº¦è¯¦ç»†æ–‡æ¡ˆ
    const dimMeta = {
        1: { name: "å·¥ä½œè´Ÿè·", desc: "è¯„ä¼°â€œäº‹â€å¤šä¸å¤šã€‚é«˜åˆ†æ„å‘³ç€ä½ çš„æ—¶é—´è¡¨åƒä¿„ç½—æ–¯æ–¹å—ä¸€æ ·ä¸¥ä¸åˆç¼ï¼Œå¯èƒ½æ‰¿æ‹…äº†è¿‡å¤šâ€œéšå½¢å·¥ä½œâ€ã€‚", advice: "ä¸è¦è¿½æ±‚å®Œç¾çš„'åšå®Œ'ï¼Œè¦è¿½æ±‚æ ¸å¿ƒçš„'åšå¯¹'ï¼Œå­¦ä¼šæŠ“å¤§æ”¾å°ã€‚" },
        2: { name: "è§’è‰²è‡ªä¸»", desc: "è¯„ä¼°â€œæƒâ€å¤§ä¸å¤§ã€‚é«˜åˆ†æ„å‘³ç€ä½ å¯èƒ½å¤„äºâ€œå·¥å…·äººâ€å›°å¢ƒï¼Œå¾®è§‚ç®¡ç†æˆ–èŒè´£ä¸æ¸…æ­£åœ¨æ‰¼æ€ä½ çš„ä¸»åŠ¨æ€§ã€‚", advice: "å¦‚æœæ˜¯å¾®è§‚ç®¡ç†ï¼Œè¯•ç€ä¸»åŠ¨æ±‡æŠ¥è¿›åº¦ï¼Œç”¨è¿‡åº¦æ²Ÿé€šæ¢å–ä¿¡ä»»ç©ºé—´ã€‚" },
        3: { name: "äººé™…æ²Ÿé€š", desc: "è¯„ä¼°â€œäººâ€å¥½ä¸å¥½å¤„ã€‚é«˜åˆ†æ„å‘³ç€ä½ å¯èƒ½æ­£å……å½“â€œæƒ…ç»ªåƒåœ¾æ¡¶â€ï¼Œå‘¨æ—‹äºå¤æ‚å…³ç³»æˆ–ç¼ºä¹æ”¯æŒçš„ç¯å¢ƒä¸­ã€‚", advice: "å»ºç«‹'èŒä¸šéš”ç¦»å¢™'ï¼Œä¸è¦è®©åŒäº‹çš„æƒ…ç»ªæˆä¸ºä½ çš„è´£ä»»ã€‚" },
        4: { name: "èŒä¸šå‘å±•", desc: "è¯„ä¼°â€œå¥”å¤´â€è¶³ä¸è¶³ã€‚é«˜åˆ†ä»£è¡¨â€œèŒåœºè¿·é›¾æ„Ÿâ€ï¼Œçœ‹ä¸æ¸…æ™‹å‡è·¯å¾„æˆ–æ‹…å¿ƒè¢«è¾¹ç¼˜åŒ–ï¼Œè¿™ç§è¿·èŒ«æ¯”å¿™ç¢Œæ›´ç´¯äººã€‚", advice: "å“ªæ€•ä¸è·³æ§½ï¼Œä¹Ÿå»é¢è¯•çœ‹çœ‹ï¼Œå¸‚åœºåé¦ˆæ˜¯æ²»æ„ˆè¿·èŒ«çš„è‰¯è¯ã€‚" },
        5: { name: "ç”Ÿæ´»å¹³è¡¡", desc: "è¯„ä¼°â€œè¾¹ç•Œâ€æ¸…ä¸æ¸…ã€‚é«˜åˆ†æ„å‘³ç€ä½ æ˜¯â€œå…¨å¤©å€™å¾…æœºè€…â€ï¼Œç”Ÿæ´»å’Œå·¥ä½œæ²¡æœ‰äº†ç‰©ç†éš”ç»ï¼Œæ€¥éœ€åœæœºç»´æŠ¤ã€‚", advice: "æ¯å¤©è®¾ç½®1å°æ—¶'é£è¡Œæ¨¡å¼'ï¼ŒæŠŠå¤§è„‘è¿˜ç»™è‡ªå·±ã€‚" },
        6: { name: "èº«å¿ƒåé¦ˆ", desc: "è¯„ä¼°â€œå†…è€—â€é‡ä¸é‡ã€‚é«˜åˆ†ä»£è¡¨â€œèº¯ä½“åŒ–é¢„è­¦â€ï¼Œå¤±çœ ã€æ˜“æ€’ã€ç–²æƒ«éƒ½æ˜¯èº«ä½“åœ¨æ›¿ä½ å‘å‡ºçš„æ±‚æ•‘ä¿¡å·ã€‚", advice: "èº«ä½“æ¯”å¤§è„‘æ›´è¯šå®ã€‚å¦‚æœæ„Ÿåˆ°è«åçš„çƒ¦èºï¼Œè¯·ç«‹åˆ»åœä¸‹æ¥æ·±å‘¼å¸ã€‚" }
    };

    let currentQuestionIndex = 0;
    let totalScore = 0;
    let dimScores = {1:0, 2:0, 3:0, 4:0, 5:0, 6:0};
    const dimCounts = {1:8, 2:8, 3:8, 4:8, 5:8, 6:10};

    function startQuiz() {
        document.getElementById('welcome-screen').classList.remove('active');
        document.getElementById('quiz-screen').classList.add('active');
        renderQuestion();
    }

    function renderQuestion() {
        const q = questions[currentQuestionIndex];
        document.getElementById('question-text').textContent = q.t;
        document.getElementById('current-num').textContent = currentQuestionIndex + 1;
        document.getElementById('progress-bar').style.width = ((currentQuestionIndex) / questions.length) * 100 + '%';
    }

    function selectOption(val) {
        const q = questions[currentQuestionIndex];
        totalScore += val;
        dimScores[q.d] += val;
        currentQuestionIndex++;
        if(currentQuestionIndex < questions.length) renderQuestion();
        else showResults();
    }

    function showResults() {
        document.getElementById('quiz-screen').classList.remove('active');
        document.getElementById('result-screen').classList.add('active');

        // è®¡ç®—é€»è¾‘
        const dimAvgs = {};
        const labels = [];
        const dataPoints = [];
        let highRiskDims = [];

        for(let i=1; i<=6; i++) {
            const avg = (dimScores[i] / dimCounts[i]).toFixed(1);
            dimAvgs[i] = avg;
            labels.push(dimMeta[i].name);
            dataPoints.push(avg);
            if(avg >= 3.5) highRiskDims.push({id: i, score: avg}); 
        }

        // æ€»ç”»åƒ
        let pText="", pDesc="", pIcon="";
        if(totalScore <= 100) { pIcon="ğŸŒ¸"; pText="æ¾å¼›æ„ŸÂ·å¤©é€‰æ‰“å·¥äºº"; pDesc="çŠ¶æ€ï¼šæ»¡ç”µç»­èˆªã€‚å·¥ä½œè¾¹ç•Œæ„Ÿæä½³ï¼Œå¿ƒæ€ç¨³å¦‚å¡çš®å·´æ‹‰ã€‚"; }
        else if(totalScore <= 150) { pIcon="ğŸ”‹"; pText="ä¸”è¡Œä¸”çœ‹Â·éšå½¢è€—ç”µä½“"; pDesc="çŠ¶æ€ï¼šä½ç”µé‡è¿è¡Œã€‚è¡¨é¢æƒ…ç»ªç¨³å®šï¼Œä½†å†…å¿ƒå¸¸æœ‰ç–²æƒ«æ„Ÿï¼Œå»ºè®®å®‰æ’åœæœºç»´æŠ¤ã€‚"; }
        else if(totalScore <= 200) { pIcon="ğŸ”¥"; pText="é«˜å‹è¿‡è½½Â·èŒåœºç‰¹ç§å…µ"; pDesc="çŠ¶æ€ï¼šè¿‡çƒ­é¢„è­¦ã€‚è´£ä»»æ„Ÿè®©ä½ æ‰›ä¸‹äº†å¤ªå¤šï¼Œèº«ä½“çš„è´¦å•å¾€å¾€æ˜¯æœ€è´µçš„ã€‚"; }
        else { pIcon="ğŸš¨"; pText="å³å°†ç†”æ–­Â·è¶…çº§è®¡ç®—æœº"; pDesc="çŠ¶æ€ï¼šç´§æ€¥åˆ¶åŠ¨ã€‚è­¦æŠ¥æ‹‰å“ï¼ç°åœ¨çš„ç¯å¢ƒå¯èƒ½åœ¨é€æ”¯ä½ çš„å¥åº·ã€‚"; }
        
        document.getElementById('persona-icon').textContent = pIcon;
        document.getElementById('persona-text').textContent = pText;
        document.getElementById('persona-desc').textContent = pDesc;

        // ç»˜åˆ¶é›·è¾¾å›¾
        const ctx = document.getElementById('radarChart').getContext('2d');
        new Chart(ctx, {
            type: 'radar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'å‹åŠ›å€¼',
                    data: dataPoints,
                    backgroundColor: 'rgba(255, 140, 198, 0.2)', 
                    borderColor: '#FF8CC6',
                    pointBackgroundColor: '#9F6AD4',
                    pointBorderColor: '#fff',
                    borderWidth: 2
                }]
            },
            options: {
                scales: {
                    r: {
                        angleLines: { color: '#eee' },
                        grid: { color: '#eee' },
                        suggestedMin: 1, suggestedMax: 5,
                        pointLabels: { font: {size:12}, color: '#666' }
                    }
                },
                plugins: { legend: {display: false} }
            }
        });

        // é”¦å›Šæ³¨å…¥
        const adviceContainer = document.getElementById('advice-list');
        const adviceSection = document.getElementById('advice-section');
        let adviceHtml = "";
        
        highRiskDims.sort((a,b) => b.score - a.score);
        let showDims = highRiskDims.length > 0 ? highRiskDims : [{id: 6}, {id: 5}]; 

        showDims.slice(0, 3).forEach(item => { 
            const info = dimMeta[item.id];
            adviceHtml += `
                <div class="kit-item">
                    <div class="kit-tag">${info.name}</div>
                    <div style="flex:1;">${info.advice}</div>
                </div>
            `;
        });
        adviceContainer.innerHTML = adviceHtml;
        adviceSection.style.display = 'block';

        // ç»´åº¦åˆ—è¡¨æ³¨å…¥
        const dimListContainer = document.getElementById('dim-list-container');
        let dimListHtml = "";
        
        for(let i=1; i<=6; i++) {
            const score = dimAvgs[i];
            const info = dimMeta[i];
            const isHigh = score >= 3.5;
            
            const tagHtml = isHigh ? `<span class="high-pressure-tag">é«˜å‹</span>` : ``;
            const scoreClass = isHigh ? `dim-score high` : `dim-score`;

            dimListHtml += `
                <div class="dim-card">
                    <div class="dim-info">
                        <div class="dim-name">${info.name} ${tagHtml}</div>
                        <div class="dim-desc">${info.desc}</div>
                    </div>
                    <div class="${scoreClass}">${score}</div>
                </div>
            `;
        }
        dimListContainer.innerHTML = dimListHtml;
    }

    // --- é«˜æ¸…é•¿å›¾ç”Ÿæˆ (ä¿®å¤æ–‡å­—çœ‹ä¸æ¸…é—®é¢˜) ---
    function saveAsImage() {
        const element = document.getElementById('capture-target');
        
        // 1. æ·»åŠ æˆªå›¾çŠ¶æ€ç±» (å»é˜´å½±ã€å¼ºåˆ¶ç™½åº•é»‘å­—)
        element.classList.add('capturing');

        window.scrollTo(0,0);
        
        // 2. ä½¿ç”¨é«˜å€ç‡ scale: 3 ä¿è¯æ¸…æ™°
        html2canvas(element, { 
            scale: 3, 
            useCORS: true,
            backgroundColor: "#FFFFFF" // å¼ºåˆ¶ç™½åº•
        }).then(canvas => {
            // 3. æ¢å¤åŸå§‹æ ·å¼
            element.classList.remove('capturing');

            // 4. ä¸‹è½½å›¾ç‰‡
            const link = document.createElement('a');
            link.download = 'èŒåœºå‹åŠ›ç”»åƒ.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        });
    }
</script>

</body>
</html>